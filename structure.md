以下では、リポジトリ [All-Hands-AI/OpenHands](https://github.com/All-Hands-AI/OpenHands) の大まかなディレクトリ構成やコードがどのように整理されているかを俯瞰し、主な役割を解説します。

---

## リポジトリ概要

**OpenHands** は PyTorch ベースで構築された、手話認識（Sign Language Recognition, SLR）向けのオープンソースツールキットです。以下のような特徴を持ちます。

- **データセットの扱い**
  手話認識タスクに必要なデータローダや前処理（変換）を提供。
- **モジュール化されたアーキテクチャ**
  手話認識に特化したレイヤやニューラルネットワークモジュールを提供。
- **多様なタスク対応**
  Isolated（単語単位）や Continuous（継続的）など、複数の手話認識タスクに対応。
- **トレーニング・推論フロー**
  PyTorch のトレーニングループや推論の流れを汎用的に扱える仕組みが整備されている。

---

## ディレクトリ構造

リポジトリをクローンすると、主に以下のようなディレクトリ／ファイルが確認できます。

```
.
├─ .github/
│   └─ ...                # GitHub用のワークフローやIssueテンプレートなど
├─ docs/
│   └─ ...                # ドキュメント関連
├─ openhands/
│   ├─ data/
│   ├─ engine/
│   ├─ layers/
│   ├─ methods/
│   ├─ modules/
│   ├─ transforms/
│   ├─ utils/
│   ├─ config.py
│   ├─ __init__.py
│   └─ version.py
├─ tests/
│   └─ ...                # テスト用スクリプト
├─ MANIFEST.in
├─ pyproject.toml
├─ README.md
├─ requirements.txt
└─ setup.cfg
```

以下では、それぞれのフォルダ／ファイルの概要を説明します。

### `.github/`
- **ワークフロー用設定**
  GitHub Actions などの CI/CD パイプラインを定義するファイル群があります。プルリクエストやテストなどを自動化するための設定が含まれています。

### `docs/`
- **ドキュメント**
  ユーザ向けのチュートリアルや API リファレンスを掲載するためのソースファイルが配置されています。
- ReadTheDocs や Sphinx などを用いてウェブサイト化したり、リファレンスを自動生成したりする可能性が高いです。

### `openhands/`
OpenHands のメインとなるライブラリ部分がまとまっています。以下にサブディレクトリを解説します。

1. **`data/`**
   - データセットクラスやデータローダの定義を行うモジュールが含まれています。
   - 例: `dataset.py` やカスタム DataLoader、データ分割やアノテーション読み込みなど。

2. **`engine/`**
   - トレーニングや評価を実行するためのループやハンドラー、学習プロセスを一元管理するクラス／関数が置かれています。
   - 例: `trainer.py`、`evaluator.py`、学習ステップやエポックごとの処理など。

3. **`layers/`**
   - PyTorch の `nn.Module` を拡張したカスタムレイヤやブロックが実装されています。
   - 例: Attention モジュールや特定のタスク向けに最適化された畳み込みレイヤなど。

4. **`methods/`**
   - 手話認識タスクを実装したモデル・メソッドがまとまっています。
   - Isolated SLR 用、Continuous SLR 用など、論文に基づく手法が実装されている可能性があります。
   - ネットワークの全体構造や、学習・推論のメインロジックが含まれることが多いです。

5. **`modules/`**
   - モデルを組む上での部品（サブネットワーク、ブロック、構成要素）が入っているフォルダです。
   - 例: CNN、RNN、Transformer、Temporal モジュールなど、再利用可能なブロック。

6. **`transforms/`**
   - 画像やキーポイント、動画データなど、入力に対する前処理・変換ロジックが含まれています。
   - 例: 正規化やリサイズ、データ拡張(augmentation)、座標変換など。

7. **`utils/`**
   - 汎用的に使えるユーティリティ関数やクラスが含まれます。
   - 例: ロガー、進捗バー、ファイル入出力ヘルパー、学習率スケジューラなど。

8. **`config.py`**
   - 全体設定やデフォルトパラメータ、環境設定などを集中管理するスクリプトです。

9. **`__init__.py`**
   - このフォルダ（`openhands/`）を Python パッケージとして扱うための初期化ファイル。
   - 各サブディレクトリ内のモジュールを `openhands` 配下にインポートしやすくする役割を持ちます。

10. **`version.py`**
    - ライブラリバージョンを一元管理するためのファイルです。

### `tests/`
- **テストスクリプト**
  単体テストや統合テスト用の Python スクリプトがまとめられています。テストフレームワークは `pytest` や `unittest` などが想定されます。
- 新しい機能や修正を加えた際に、ライブラリが正しく動作するか自動でチェックします。

### ルート直下のその他ファイル
- **`MANIFEST.in`** / **`pyproject.toml`** / **`setup.cfg`**
  PyPI へのパッケージ公開やインストールに関連した設定ファイル。
- **`requirements.txt`**
  ライブラリの依存関係を記述。ユーザはこれをもとに必要なライブラリをインストールできます。
- **`README.md`**
  プロジェクトの概要やインストール方法、使い方などがまとめられています。

---

## コード全体の流れ・利用イメージ

1. **インストールとデータ設定**
   `pip install openhands`（あるいはクローン後に `pip install -e .`）などでライブラリをインストールし、データやアノテーションを準備。
2. **データローダ（`data/`）の利用**
   手話映像やキーポイント情報など、認識モデルが扱いやすい形に変換する。
3. **前処理や変換（`transforms/`）**
   動画や画像を一定のサイズに揃えたり、データ拡張を行ったりしてモデル学習を支援。
4. **モデル構築（`methods/` + `modules/`）**
   既存のベースラインモデルを流用する、またはカスタムブロック（`layers/`）を組み合わせて独自モデルを作る。
5. **学習・評価（`engine/`）**
   トレーニングループや評価関数を呼び出し、学習と精度検証を一元管理。
6. **ユーティリティ（`utils/`）活用**
   ロギング・学習率スケジューラ・チェックポイント保存など、補助的処理を簡潔に書くことができる。
7. **成果のテスト（`tests/`）**
   実装したモジュールやデータ処理が想定どおり動くか検証する。

---

## まとめ

- **OpenHands** は手話認識におけるデータの読み込みからモデルの構築、学習、評価までを一貫して支援する構造になっています。
- ディレクトリ構造は PyTorch プロジェクトでよく見られる典型的な構成であり、**data／transforms** で入力データ、**methods／modules** でモデル、**engine** で学習の流れ、**utils** で汎用処理と役割が明確化されています。
- 各サブディレクトリは、手話認識タスクに特化した実装をカプセル化しており、再利用性と拡張性を考慮した設計になっていることが特徴です。

これにより、新たにモデルを追加したりデータセットを拡張したりする際にもわかりやすく、共同開発もしやすい設計が実現されていると言えます。